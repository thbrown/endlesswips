{"version":3,"file":"component---src-pages-aoe-2-de-rating-charts-admin-js-a0b7b48f4837461caa9f.js","mappings":"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","sources":["webpack://endlesswips/./src/pages/aoe2-de-rating-charts/admin.js","webpack://endlesswips/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"],"sourcesContent":["import React from \"react\";\r\n\r\nimport Layout from \"../../components/layout\";\r\nimport SEO from \"../../components/seo\";\r\nimport Spinner from \"../../components/spinner\";\r\n\r\nclass Admin extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      configTwitchChannelId: undefined,\r\n      configForceBits: false,\r\n      configPassword: undefined,\r\n      creditTwitchChannelId: undefined,\r\n      creditTwitchUserId: undefined,\r\n      creditValue: 0,\r\n      creditPassword: undefined,\r\n    };\r\n\r\n    this.grantCredit = async function (e) {\r\n      console.log(\"I AM HERE\");\r\n      console.log(\r\n        \"PIZZA\",\r\n        JSON.stringify({\r\n          password: this.state.creditPassword,\r\n          command: {\r\n            type: \"ADMIN_CREDIT\",\r\n            data: { bitsValue: this.state.creditValue },\r\n          },\r\n          bodyChannelId: this.state.creditTwitchChannelId,\r\n          bodyUserId: this.state.creditTwitchUserId,\r\n          windowId: \"admin-console\",\r\n        })\r\n      );\r\n      //console.log(this.state);\r\n      e.preventDefault();\r\n      let response = await fetch(\r\n        \"https://us-central1-age-of-empires-307521.cloudfunctions.net/twitch-rating-charts-config\",\r\n        {\r\n          method: \"POST\",\r\n          cache: \"no-cache\",\r\n          credentials: \"same-origin\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            password: this.state.creditPassword,\r\n            command: {\r\n              type: \"ADMIN_CREDIT\",\r\n              data: { bitsValue: this.state.creditValue },\r\n            },\r\n            bodyChannelId: this.state.creditTwitchChannelId,\r\n            bodyUserId: this.state.creditTwitchUserId,\r\n            windowId: \"admin-console\",\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (response.status == 204) {\r\n        console.log(\"SUCCESS!\");\r\n        this.setState({\r\n          modal: \"config-success\",\r\n          executing: false,\r\n        });\r\n      } else {\r\n        response.text().then(\r\n          function (text) {\r\n            console.error(text);\r\n            this.setState({\r\n              modal: \"config-fail\",\r\n              executing: false,\r\n              errorMessage: text,\r\n            });\r\n          }.bind(this)\r\n        );\r\n      }\r\n\r\n      this.setState({\r\n        executing: false,\r\n      });\r\n\r\n      return false;\r\n    }.bind(this);\r\n\r\n    this.updateConfiguration = async function (e) {\r\n      console.log(this.state);\r\n      e.preventDefault();\r\n      let response = await fetch(\r\n        \"https://us-central1-age-of-empires-307521.cloudfunctions.net/twitch-rating-charts-config\",\r\n        {\r\n          method: \"POST\",\r\n          cache: \"no-cache\",\r\n          credentials: \"same-origin\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            password: this.state.configPassword,\r\n            command: {\r\n              type: \"ADMIN_CONFIG\",\r\n              data: { forceBits: this.state.configForceBits },\r\n            },\r\n            bodyUserId: \"N/A\", // Shouldn't be required but it is\r\n            bodyChannelId: this.state.configTwitchChannelId,\r\n            windowId: \"admin-console\",\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (response.status == 204) {\r\n        console.log(\"SUCCESS!\");\r\n        this.setState({\r\n          modal: \"config-success\",\r\n          executing: false,\r\n        });\r\n      } else {\r\n        response.text().then(\r\n          function (text) {\r\n            console.error(text);\r\n            this.setState({\r\n              modal: \"config-fail\",\r\n              executing: false,\r\n              errorMessage: text,\r\n            });\r\n          }.bind(this)\r\n        );\r\n      }\r\n\r\n      this.setState({\r\n        executing: false,\r\n      });\r\n\r\n      return false;\r\n    }.bind(this);\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  render() {\r\n    return (\r\n      <Layout location={{ pathname: \"/404\" }}>\r\n        <SEO title=\"Administration\" />\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <form>\r\n            <fieldset>\r\n              <legend>\r\n                <h3>Grant Credit</h3>\r\n              </legend>\r\n\r\n              <div>\r\n                <label for=\"userid\">User Id</label>\r\n                <div>\r\n                  <input\r\n                    id=\"userid\"\r\n                    name=\"userid\"\r\n                    type=\"text\"\r\n                    placeholder=\"\"\r\n                    onChange={function (e) {\r\n                      this.setState({\r\n                        creditTwitchUserId: e.target.value,\r\n                      });\r\n                    }.bind(this)}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label for=\"channelIdCredit\">Channel Id</label>\r\n                <div>\r\n                  <input\r\n                    id=\"channelIdCredit\"\r\n                    name=\"channelIdCredit\"\r\n                    type=\"text\"\r\n                    placeholder=\"\"\r\n                    onChange={function (e) {\r\n                      this.setState({\r\n                        creditTwitchChannelId: e.target.value,\r\n                      });\r\n                    }.bind(this)}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label for=\"bitsValue\">Bits Value</label>\r\n                <div>\r\n                  <input\r\n                    name=\"bitsValue\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    onChange={function (e) {\r\n                      this.setState({\r\n                        creditValue: e.target.value,\r\n                      });\r\n                    }.bind(this)}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label for=\"passwordInputCredit\">Password</label>\r\n                <div>\r\n                  <input\r\n                    id=\"passwordInputCredit\"\r\n                    name=\"passwordInputCredit\"\r\n                    type=\"password\"\r\n                    onChange={function (e) {\r\n                      this.setState({\r\n                        creditPassword: e.target.value,\r\n                      });\r\n                    }.bind(this)}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n              <br></br>\r\n              <button className=\"button\" onClick={this.grantCredit}>\r\n                <div className=\"button-text\">Submit</div>\r\n              </button>\r\n            </fieldset>\r\n          </form>\r\n          <hr></hr>\r\n          <form>\r\n            <fieldset>\r\n              <legend>\r\n                <h3>Force Bits</h3>\r\n              </legend>\r\n\r\n              <div>\r\n                <label for=\"channelId\">Channel Id</label>\r\n                <div>\r\n                  <input\r\n                    id=\"channelId\"\r\n                    name=\"channelId\"\r\n                    type=\"text\"\r\n                    onChange={function (e) {\r\n                      this.setState({\r\n                        configTwitchChannelId: e.target.value,\r\n                      });\r\n                    }.bind(this)}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label for=\"forceBits\">Force Bits</label>\r\n                <div>\r\n                  <input\r\n                    name=\"forceBits\"\r\n                    type=\"checkbox\"\r\n                    onChange={function (e) {\r\n                      this.setState({\r\n                        configForceBits: e.target.checked,\r\n                      });\r\n                    }.bind(this)}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label for=\"passwordinput\">Password</label>\r\n                <div>\r\n                  <input\r\n                    id=\"passwordinput\"\r\n                    name=\"passwordinput\"\r\n                    type=\"password\"\r\n                    onChange={function (e) {\r\n                      this.setState({\r\n                        configPassword: e.target.value,\r\n                      });\r\n                    }.bind(this)}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n              <br></br>\r\n              <button className=\"button\" onClick={this.updateConfiguration}>\r\n                <div className=\"button-text\">Submit</div>\r\n              </button>\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Admin;\r\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}"],"names":["Admin","props","state","configTwitchChannelId","undefined","configForceBits","configPassword","creditTwitchChannelId","creditTwitchUserId","creditValue","creditPassword","grantCredit","e","console","log","JSON","stringify","password","this","command","type","data","bitsValue","bodyChannelId","bodyUserId","windowId","preventDefault","fetch","method","cache","credentials","headers","Accept","body","response","status","setState","modal","executing","text","then","error","errorMessage","bind","updateConfiguration","forceBits","componentDidMount","render","location","pathname","title","style","textAlign","for","id","name","placeholder","onChange","target","value","min","className","onClick","checked","React","_assertThisInitialized","self","ReferenceError"],"sourceRoot":""}